<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" type="text/css" href="001.css">

    <script>

      var isFocus = false;

      // Content
      var colors = ["#ffffff", "#ffffff", "#ffffff", "ffffff"];
      var headers = ["Возможности\nинтернет-банка", "Новости", "Рекомендации по безопасности", "Интернет-банк"];
      var texts = [
        "<ul>" +
        "<li>Оплата мобильной связи, интернета, ЖКХ и других услуг без очередей<br>и в любое время" +
        "<li>Моментальные переводы на карты любых банков" +
        "<li>Удобное открытие и управление вкладами" +
        "<li>Оформление заявки на получение кредита" +
        "</ul>",
        "<span class='newsDate'>20.12.17</span><span class='newsTitle'>В Новый год с новым интернет-банком</span><br>" +
        "<span class='newsDate'>11.10.17</span><span class='newsTitle'>Удобные переводы</span><br>" +
        "<span class='newsDate'>14.08.17</span><span class='newsTitle'>Большое обновление Мобильного банка для iOS</span><br>" +
        "<span class='newsDate'>31.07.17</span><span class='newsTitle'>Сезонный вклад «Быстрый доход»</span><br>" +
        "<span class='newsDate'>20.12.17</span><span class='newsTitle'>В Новый год с новым интернет-банком</span><br>" +
        "<span class='newsDate'>07.07.17</span><span class='newsTitle'>Комиксы о правилах финансовой безопасности</span><br>",
        "<ul>" +
        "<li>Храните в тайне пароли, коды для подтверждения операций и CVV-код (номер на обратной стороне карты)" +
        "<li>Регулярно обновляйте пароль для входа в интернет-банк по требованию Банка, направленному в автоматическом режиме" +
        "<li>В случае утери телефона немедленно заблокируйте SIM-карту или Интернет-банк" +
        "</ul>",
        "С 1 января ВТБ Банк Москвы и ВТБ24 объединились и стали одним банком&nbsp;— ВТБ. К вашим услугам теперь новый и удобный интернет-банк ВТБ-Онлайн." +
        "<ul>" +
        "<li>Быстрая онлайн регистрация по номеру карты" +
        "<li>Сохранение выписок по проведенным ранее операциям" +
        "<li>Переводы клиентам банка по номеру телефона, оформление вкладов и кредитов и другие удобные преимущества" +
        "</ul>"
      ];
      var links = ["Узнать все возможности", "Больше новостей", "Больше советов ", "Веб-сайт"];
      var images = [
        ["icon_features.svg", "icon_features_black.svg"],
        ["icon_news.svg", "icon_news_black.svg"],
        ["icon_safety.svg", "icon_safety_black.svg"],
      ];

      var logotypesCount = 3;

      // Pack content into array of objects. Each object - logotype and popup with their own props
      var logotypes = [];

      for (i = 0; i < logotypesCount; i++) {
        logotypes[i] = {
          bg: "",
          bgId: "lbg" + i,
          wrapperBg: "",
          wrapperBgId: "lwbg" + i,
          bgColor: colors[i],
          header: headers[i],
          text: texts[i],
          link: links[i],
          img: "",
          imgNames: images[i],
          imgId: "icon" + i,
        }
      }

      // Show logotype circle background on hover
      function showBG(id) {
        logotypes[id].bg.classList.remove("logoBackgroundHide");
        logotypes[id].bg.classList.add("logoBackgroundShow");
        logotypes[id].img.src = logotypes[id].imgNames[1];
      }

      // Remove logotype circle background
      function hideBG(id) {
        logotypes[id].bg.classList.remove("logoBackgroundVisible");
        logotypes[id].bg.classList.add("logoBackgroundHide");
        logotypes[id].img.src = logotypes[id].imgNames[0];
      }

      // Show popup if clicked on logotype
      function showPopup(logo) {

        if (!isFocus) {
          // Create new html elements for popup
          var shadow = document.createElement("div");
          var clicker = document.createElement("div");
          var popupContainer = document.createElement("div");
          var popup = document.createElement("div");
          var popupContent = document.createElement("div");
          var popupCloseIcon = document.createElement("div");
          var popupHeader = document.createElement("div");
          var popupText = document.createElement("div");
          var popupButton = document.createElement("button");

          // Add style classes to elements
          shadow.classList.add("shadow");
          clicker.classList.add("clicker");
          popupContainer.classList.add("popupContainer");
          popup.classList.add("popup");
          popupContent.classList.add("popupContent");
          popup.style.backgroundColor = logo.bgColor;
          popupCloseIcon.classList.add("popupCloseIcon");
          popupHeader.classList.add("popupHeader");
          popupButton.classList.add("popupButton");

          // Add content
          popupCloseIcon.innerHTML = "<img src='icon_close.svg'>";
          popupHeader.innerText = logo.header;
          popupText.innerHTML = logo.text;
          popupButton.innerText = logo.link;

          // Push elements to DOM
          var shadowElem = document.body.appendChild(shadow);
          var clickerElem = shadow.appendChild(clicker);
          clicker.appendChild(popupContainer);
          var popupElem = popupContainer.appendChild(popup);
          popup.appendChild(popupContent);
          popupContent.appendChild(popupCloseIcon);
          popupContent.appendChild(popupHeader);
          popupContent.appendChild(popupText);
          popupContent.appendChild(popupButton);

          // Create event handlers to hide popup
          popupCloseIcon.addEventListener("click", function () {
            hidePopup(shadowElem)
          }, false);
          clickerElem.addEventListener("click", function () {
            hidePopup(shadowElem)
          }, false);
          popupElem.addEventListener("click", function (event) {
            event.stopImmediatePropagation();
          }, false)
        }
      }

      // Hide popup
      function hidePopup(elem) {
        document.body.removeChild(elem);
      }

      function cursorPointer() {
        for (i = 0; i < logotypes.length; i++) {
          logotypes[i].wrapperBg.classList.remove("cursorDefault");
        }
      }

      function cursorDefault() {
        for (i = 0; i < logotypes.length; i++) {
          logotypes[i].wrapperBg.classList.add("cursorDefault");
        }
      }

      function focusForm() {
        pageTitle.classList.remove("visible");
        logoRow.classList.remove("visible");

        pageTitle.classList.add("hidden");
        logoRow.classList.add("hidden");

        pageContainer.classList.add("focusBackground");

        isFocus = true;
        cursorDefault();

        if (!formLogin.value && !formPass.value) {
          unfocusForm();
        }
      }

      function unfocusForm () {
        pageTitle.classList.remove("hidden");
        logoRow.classList.remove("hidden");

        pageTitle.classList.add("visible");
        logoRow.classList.add("visible");

        pageContainer.classList.remove("focusBackground");

        isFocus = false;
        cursorPointer();

      }


      function checkVisibility () {
        validateButton();

        if (formLogin.value || formPass.value) {
          focusForm();
          pageSubTitle.classList.add("hidden");

          formLogin.classList.add("resizeLogin");

          formPassContainer.classList.remove("hidden");
          formPassContainer.classList.add("visible");

          formButtonContainer.classList.remove("hidden");
          formButtonContainer.classList.add("visible");
        }
        else {
          if (!formPass.value) {
            formLogin.classList.remove("resizeLogin");

            formPassContainer.classList.remove("visible");
            formPassContainer.classList.add("hidden");

            formButtonContainer.classList.remove("visible");
            formButtonContainer.classList.add("hidden");

            formLogin.classList.remove("resizeLogin");
            unfocusForm();
          }
        }
      }

      function validateButton() {
        if (formLogin.value && formPass.value) {
          formButton.classList.add("formButtonValid");
        }
        else {
          formButton.classList.remove("formButtonValid");
        }
      }

      function validateForm(event) {
        event.stopImmediatePropagation();
        if (!formPass.value) {
          pageSubTitle.innerText = "Вы не ввели пароль";
          pageSubTitle.classList.remove("hidden");
        }
        if (!formLogin.value) {
          pageSubTitle.innerText = "Вы не ввели логин";
          pageSubTitle.classList.remove("hidden");
        }
        if (formPass.value && formLogin.value) {
          pageSubTitle.innerHTML = "Клиента с таким логином не существует. <span class='pageSubTitleLink'>Забыли логин</span> или <span class='pageSubTitleLink'>хотите открыть счет</span>?";
          pageSubTitle.classList.remove("hidden");
        }
      }

      window.onload = function() {

        var logoRow = document.getElementById("logoRow");
        var formLogin = document.getElementById("formLogin");
        var formComment = document.getElementById("formComment");
        var formPass = document.getElementById("formPass");
        var formPassContainer = document.getElementById("formPassContainer");
        var formButtonContainer = document.getElementById("formButtonContainer");
        var formButton = document.getElementById("formButton");
        var formCheckbox = document.getElementById("formCheckbox");
        var formTitle = document.getElementById("formTitle");
        var pageContainer = document.getElementById("pageContainer");
        var pageTitle = document.getElementById("pageTitle");
        var pageSubTitle = document.getElementById("pageTitle");

        var iconFeatures = document.getElementById("iconFeatures");
        var iconNews = document.getElementById("iconNews");
        var iconSafety = document.getElementById("iconSafety");

        var clickerElem2 = document.getElementById("pageContainer");

        // Checkers for showing password and submit button
        formLogin.addEventListener("input", checkVisibility, false);
        formPass.addEventListener("input", validateButton, false);

        // Focus login form
        formLogin.focus();

        // Stoping click propoganation
        formLogin.addEventListener("click", function(event) {
          event.stopImmediatePropagation();
        }, false);
        formComment.addEventListener("click", function(event) {
          event.stopImmediatePropagation();
        }, false);
        formPass.addEventListener("click", function(event) {
          event.stopImmediatePropagation();
        }, false);
        formCheckbox.addEventListener("click", function(event) {
          event.stopImmediatePropagation();
        }, false);
        formTitle.addEventListener("click", function(event) {
          event.stopImmediatePropagation();
        }, false);
        formButton.addEventListener("click", function(event) { validateForm(event) }, false);
        // formButton.addEventListener("click", function(event) {
        //   event.stopImmediatePropagation();
        // }, false);

        formLogin.addEventListener("focus", checkVisibility, false);
        formPass.addEventListener("focus", checkVisibility, false);
        clickerElem2.addEventListener("click", checkVisibility, false);

        // Checker to unfocus login form
        clickerElem2.addEventListener("click", unfocusForm, false);

        for (i = 0; i < logotypes.length; i ++) {
          logotypes[i].bg = document.getElementById(logotypes[i].bgId);
          logotypes[i].wrapperBg = document.getElementById(logotypes[i].wrapperBgId);
          logotypes[i].img = document.getElementById(logotypes[i].imgId);
        }

        // Create event handlers to show/hide circle backgrounds on hover logotypes
        for (i = 0; i < logotypes.length; i++) {
          (function() {
            var id = i;
            logotypes[i].wrapperBg.addEventListener("mouseenter", function () {
              showBG(id);
            }, false);

            logotypes[i].wrapperBg.addEventListener("mouseleave", function () {
              hideBG(id);
            }, false);
          })();
        }

        // Create event handler to show popup when logotype clicked
        for (i = 0; i < logotypes.length; i++) {
          (function() {
          var logotype = logotypes[i];
          logotypes[i].wrapperBg.addEventListener("click", function () {
            showPopup(logotype);
          }, false);
          })();
        }
      }

    </script>
  </head>
  <body>
  <div id="pageContainer" class="pageContainer">
    <div class="pageHeader">
      <!--<div class="headerLogo"><img src="vtb_logo.svg"></div>-->
      <div class="headerLogo" style="color: white;">Логотип</div>
      <div class="headerContacts">
        <div class="headerLinks">Форма обратной связи</div>
        <div class="headerLinks">Онлайн-звонок</div>
        <div class="headerContactsPhone">8 (495) 123-45-67</div>
      </div>
    </div>
    <div>
      <div id="pageTitle" class="pageTitle">Вход в интернет-банк</div>
      <div id="pageSubTitle" class="pageSubTitle">Введите адрес электронной почты или логин, выданный банком</div>
    </div>
    <div id="formContainer" class="formContainer">
      <div style="width: 100%; display: flex; flex-wrap: wrap; justify-content: flex-start;">
        <div class="formLoginContainer">
          <div class="formTitle">Логин</div>
          <div><input class="formLogin" id="formLogin"></div>
          <div id="formComment"><span class="formComment">Забыли логин или пароль?</span></div>
        </div>
        <div id="formPassContainer" class="formPassContainer hidden">
          <div class="formTitle">Пароль</div>
          <div><input id="formPass" type="password"></div>
          <div class="formCheckboxContainer">
            <div id="formCheckbox" class="formCheckbox"></div>
            <div id="formTitle" class="formTitle formCheckboxTitle">Запомнить меня</div>
          </div>
        </div>
        <div id="formButtonContainer" class="formButtonContainer hidden">
          <div><button id="formButton" class="formButton">Войти</button></div>
        </div>
      </div>
    </div>
    <div class="logoBlock" id="logoRow">
      <div class="logoWrapper">
        <div class="logoBackground" id="lbg0" style="background-color: white;"></div>
        <div class="logoBackgroundWrapper" id="lwbg0"></div>
        <div class="logo">
          <div style="margin-bottom: 20px;"><img id="icon0" src="icon_features.svg"></div>
          <div class="activityTitle">Возможности интернет-банка</div>
        </div>
      </div>
      <div class="logoWrapper">
        <div class="logoBackground" id="lbg1" style="background-color: white;"></div>
        <div class="logoBackgroundWrapper" id="lwbg1"></div>
        <div class="logo">
          <div style="margin-bottom: 20px;"><img id="icon1" src="icon_news.svg"></div>
          <div class="activityTitle">Новости</div>
        </div>
      </div>
      <div class="logoWrapper">
        <div class="logoBackground" id="lbg2" style="background-color: white;"></div>
        <div class="logoBackgroundWrapper" id="lwbg2"></div>
        <div class="logo">
          <div style="margin-bottom: 20px;"><img id="icon2" src="icon_safety.svg"></div>
          <div class="activityTitle">Рекомендации по безопасности</div>
        </div>
      </div>
    </div>

  </div>
  </body>
</html>